<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bee Expert 蜂場專家</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <header class="app-header">
        <h1>🐝 蜂場專家 <small>Pro</small></h1>
    </header>

    <main class="app-content">

        <div id="tab-home" class="tab-section active">
            <div class="dashboard-card">
                <h2>📅 今天是 <span id="dashboardDate">---</span></h2>
                <p id="dashboardYearInfo" style="color: #666;">---</p>
                <div class="weather-placeholder">
                    🌤️ 記得抬頭看看天空，適合開箱嗎？
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-card" onclick="switchTab('tab-calc')">
                    <div class="icon">🧮</div>
                    <h3>計算工具</h3>
                    <p>育王、飼料、藥劑</p>
                </div>
                <div class="menu-card" onclick="switchTab('tab-logs')">
                    <div class="icon">📝</div>
                    <h3>日誌紀錄</h3>
                    <p>巡場、採收、移動</p>
                </div>
                <div class="menu-card" onclick="switchTab('tab-tasks')">
                    <div class="icon">✅</div>
                    <h3>工作清單</h3>
                    <p>派工、備忘錄</p>
                </div>
            </div>

            <div class="section-card">
                <h3>👑 今年蜂王顏色</h3>
                <div id="home-queen-color" class="color-guide-mini">
                    </div>
            </div>
        </div>

        <div id="tab-calc" class="tab-section">
            
            <div class="tool-selector">
                <button class="accordion">📅 (一) 婚飛 / 育王反推</button>
                <div class="panel">
                    <label>目標交尾日期：</label>
                    <input type="date" id="targetMatingDate">
                    <button id="btnMatingPlanner" class="btn-action">計算</button>
                    <div class="result-box">
                        <p>移蟲日 (最遲)：<b id="queenStartDate">---</b></p>
                        <p>雄蜂培育：<b id="droneStartDate">---</b></p>
                    </div>
                </div>

                <button class="accordion">🐛 (二) 育王批次排程</button>
                <div class="panel">
                    <label>移蟲日：</label>
                    <input type="date" id="graftingDate">
                    <button id="btnRearingBatch" class="btn-action">計算排程</button>
                    <div class="result-box list-view">
                        <p>0. 移蟲：<b id="graftDate">---</b></p>
                        <p>5. 封蓋：<b id="cappingDate">---</b></p>
                        <p>11. 移台：<b id="moveCellDate" class="highlight">---</b></p>
                        <p>13. 出台：<b id="emergenceDate">---</b></p>
                        <p>22. 產卵：<b id="layingDate" class="highlight">---</b></p>
                    </div>
                </div>

                <button class="accordion">🦠 (三) 蜂蟹蟎治療期</button>
                <div class="panel">
                    <label>關王/無王日：</label>
                    <input type="date" id="cagingDate">
                    <button id="btnVarroa" class="btn-action">計算黃金期</button>
                    <div class="result-box">
                        <p>工蜂羽化完畢：<b id="workerEmergenceDate">---</b></p>
                        <p class="note">建議用藥：關王後第 21-24 天</p>
                    </div>
                </div>

                <button class="accordion">🍵 (六) 糖水/飼料比例</button>
                <div class="panel">
                    <h3>液體糖水</h3>
                    <select id="syrupRatio"><option value="1:1">1:1 (獎勵)</option><option value="2:1">2:1 (越冬)</option></select>
                    <input type="number" id="totalVolume" placeholder="總公升數 (L)">
                    <button id="btnSyrup" class="btn-action">計算</button>
                    <div class="result-box">
                        <p>糖：<b id="sugarKg">---</b> kg</p>
                        <p>水：<b id="waterL">---</b> L</p>
                    </div>
                    <hr>
                    <h3>固體飼料</h3>
                    <select id="solidRatio"><option value="fondant_5_1">蜂糖 (5:1)</option><option value="pollen_2_1">花粉餅 (2:1)</option></select>
                    <input type="number" id="totalWeight" placeholder="總公斤數 (kg)">
                    <button id="btnSolidFeed" class="btn-action">計算</button>
                    <div class="result-box">
                        <p>糖：<b id="solidSugarKg">---</b> kg</p>
                        <p>花粉/水：<b id="solidWaterL">---</b></p>
                    </div>
                </div>

                <button class="accordion">💰 (八) 利潤計算機</button>
                <div class="panel">
                     <input type="number" id="harvestBoxes" placeholder="箱數">
                     <input type="number" id="avgKgPerBox" placeholder="均產 (kg)">
                     <input type="number" id="pricePerKg" placeholder="售價 ($)">
                     <input type="number" id="costPerBox" placeholder="成本/箱 ($)">
                     <button id="btnProfit" class="btn-action">計算利潤</button>
                     <div class="result-box">
                         <p>總淨利：<b id="netProfit" style="font-size:1.2em; color:red;">---</b> 元</p>
                         <p>單箱淨利：<b id="profitPerBox">---</b> 元</p>
                     </div>
                </div>
            </div>
        </div>

        <div id="tab-logs" class="tab-section">
            <div class="tool-selector">
                
                <button class="accordion">🏥 (九) 用藥紀錄</button>
                <div class="panel">
                    <input type="date" id="medicationDate">
                    <input type="text" id="medicationHives" placeholder="蜂箱編號">
                    <input type="text" id="medicationName" placeholder="藥名 (草酸)">
                    <input type="text" id="medicationDosage" placeholder="劑量">
                    <input type="text" id="medicationNotes" placeholder="備註">
                    <button id="btnLogMedication" class="btn-action">產生紀錄</button>
                    <textarea id="medicationLogOutput" rows="5"></textarea>
                    <button class="btn-copy" onclick="copyToClipboard('medicationLogOutput')">📋 複製</button>
                </div>

                <button class="accordion">🔎 (十一) 蜂箱檢查</button>
                <div class="panel">
                    <input type="date" id="inspectionDate">
                    <input type="text" id="inspectionHives" placeholder="蜂箱編號">
                    <div class="check-row">
                        <label><input type="checkbox" id="queenSeen">見王</label>
                        <label><input type="checkbox" id="eggsSeen">見卵</label>
                        <label><input type="checkbox" id="queenCell">王台</label>
                    </div>
                    <input type="number" id="inspectionBroodFrames" placeholder="脾數">
                    <input type="text" id="inspectionNotes" placeholder="備註">
                    <button id="btnLogInspection" class="btn-action">產生紀錄</button>
                    <textarea id="inspectionLogOutput" rows="5"></textarea>
                    <button class="btn-copy" onclick="copyToClipboard('inspectionLogOutput')">📋 複製</button>
                </div>

                <button class="accordion">🚚 (十三) 蜂場移動</button>
                <div class="panel">
                    <input type="date" id="moveDate">
                    <input type="text" id="moveHives" placeholder="蜂箱編號">
                    <input type="text" id="moveFrom" placeholder="移出地">
                    <input type="text" id="moveTo" placeholder="移入地">
                    <button id="btnLogApiaryMove" class="btn-action">產生紀錄</button>
                    <textarea id="apiaryLogOutput" rows="5"></textarea>
                    <button class="btn-copy" onclick="copyToClipboard('apiaryLogOutput')">📋 複製</button>
                </div>

                <button class="accordion">🍯 (十四) 採收與費用</button>
                <div class="panel">
                    <h4>採收</h4>
                    <input type="date" id="harvestLogDate">
                    <input type="text" id="harvestLogSource" placeholder="蜜源">
                    <input type="number" id="harvestLogKg" placeholder="公斤數">
                    <button id="btnLogHarvest" class="btn-action">紀錄採收</button>
                    <textarea id="harvestLogOutput" rows="3"></textarea>
                    <button class="btn-copy" onclick="copyToClipboard('harvestLogOutput')">📋 複製</button>
                    <hr>
                    <h4>費用</h4>
                    <input type="text" id="expenseLogItem" placeholder="項目">
                    <input type="number" id="expenseLogAmount" placeholder="金額">
                    <button id="btnLogExpense" class="btn-action">紀錄費用</button>
                    <textarea id="expenseLogOutput" rows="3"></textarea>
                    <button class="btn-copy" onclick="copyToClipboard('expenseLogOutput')">📋 複製</button>
                </div>
            </div>
        </div>

        <div id="tab-tasks" class="tab-section">
            <div class="section-card">
                <h3>✅ 蜂場工作清單</h3>
                <label>日期：</label>
                <input type="date" id="taskDate">
                <label>箱號：</label>
                <input type="text" id="hiveNumbers" placeholder="例如: 1-10">
                
                <div class="task-grid">
                    <label class="task-item"><input type="checkbox" id="task1" value="餵 1:1"> 餵 1:1</label>
                    <label class="task-item"><input type="checkbox" id="task2" value="餵 2:1"> 餵 2:1</label>
                    <label class="task-item"><input type="checkbox" id="task3" value="花粉餅"> 花粉餅</label>
                    <label class="task-item"><input type="checkbox" id="task4" value="檢查產卵"> 查產卵</label>
                    <label class="task-item"><input type="checkbox" id="task5" value="檢查王台"> 查王台</label>
                    <label class="task-item"><input type="checkbox" id="task6" value="治蟎"> 治蟎</label>
                    <label class="task-item"><input type="checkbox" id="task9" value="採蜜"> 採蜜</label>
                </div>
                <input type="text" id="otherTask" placeholder="其他事項...">
                
                <button id="btnToDoList" class="btn-action">生成清單</button>
                <textarea id="toDoListOutput" rows="8"></textarea>
                <button class="btn-copy" onclick="copyToClipboard('toDoListOutput')">📋 複製到 LINE</button>
            </div>
        </div>

    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="switchTab('tab-home')">
            <span class="nav-icon">🏠</span>
            <span class="nav-text">首頁</span>
        </button>
        <button class="nav-item" onclick="switchTab('tab-calc')">
            <span class="nav-icon">🧮</span>
            <span class="nav-text">計算</span>
        </button>
        <button class="nav-item" onclick="switchTab('tab-logs')">
            <span class="nav-icon">📝</span>
            <span class="nav-text">日誌</span>
        </button>
        <button class="nav-item" onclick="switchTab('tab-tasks')">
            <span class="nav-icon">✅</span>
            <span class="nav-text">工作</span>
        </button>
    </nav>

    <script src="script.js"></script>
</body>
</html>
