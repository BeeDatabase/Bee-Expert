<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>蜂場專家</title>
    <meta name="description" content="專業養蜂人的數位管理工具。包含育王計算、飼料配比、病害防治、蜂場日誌與利潤分析。">
    <meta property="og:title" content="蜂場專家 - 專業養蜂管理系統">
    <meta property="og:description" content="專業養蜂人的數位管理工具。包含育王計算、飼料配比、病害防治、蜂場日誌與利潤分析。">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/2402/2402282.png">
    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <nav class="top-nav">
        <div class="nav-brand">
            <div class="brand-icon"><span class="material-icons-round">hive</span></div>
            <div class="brand-text">
                <h1>蜂場專家</h1>
                </div>
        </div>
        
        <div class="nav-menu-desktop">
            <button class="nav-btn active" onclick="switchTab('tab-home')">首頁</button>
            <button class="nav-btn" onclick="switchTab('tab-calc')">計算工具</button>
            <button class="nav-btn" onclick="switchTab('tab-logs')">日誌紀錄</button>
            <button class="nav-btn" onclick="switchTab('tab-tasks')">工作清單</button>
            <button class="nav-btn" onclick="switchTab('tab-settings')">設定</button>
        </div>
    </nav>

    <main class="app-content">

        <div id="tab-home" class="tab-section active">
            <div class="hero-card">
                <div class="hero-content">
                    <p class="hero-date" id="heroDate">載入中...</p>
                    <h2 class="hero-title">今日蜂場概況</h2>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <span class="stat-label">今年預估</span>
                            <span class="stat-value" id="heroYield">0 <small>kg</small></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">待辦事項</span>
                            <span class="stat-value" id="heroTaskCount">0 <small>項</small></span>
                        </div>
                    </div>
                </div>
                <div class="hero-weather">
                    <span class="material-icons-round weather-icon">wb_sunny</span>
                    <span id="heroTemp">--°C</span>
                    <span id="heroWeatherDesc">載入中</span>
                </div>
            </div>

            <div class="grid-menu">
                <div class="glass-card menu-card" onclick="switchTab('tab-calc')">
                    <span class="material-icons-round icon-gold">calculate</span>
                    <h3>計算工具</h3>
                    <p>婚飛、育王、飼料</p>
                </div>
                <div class="glass-card menu-card" onclick="switchTab('tab-logs')">
                    <span class="material-icons-round icon-green">edit_note</span>
                    <h3>日誌紀錄</h3>
                    <p>巡場、用藥、採收</p>
                </div>
                <div class="glass-card menu-card" onclick="switchTab('tab-tasks')">
                    <span class="material-icons-round icon-blue">checklist</span>
                    <h3>工作清單</h3>
                    <p>今日任務打勾</p>
                </div>
                <div class="glass-card menu-card">
                    <span class="material-icons-round icon-red">verified</span>
                    <h3>今年蜂王色</h3>
                    <div id="queenColorBox" class="queen-color-dot"></div>
                </div>
            </div>
        </div>

        <div id="tab-calc" class="tab-section">
            <h2 class="section-title">🧮 計算工具</h2>
            
            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">event</span><h3>(一) 婚飛 / 育王反推</h3></div>
                <div class="card-body">
                    <label>目標交尾日：</label><input type="date" id="inputMatingDate" class="glass-input">
                    <button id="btnCalcMating" class="btn-primary">計算</button>
                    <div class="result-area">
                        <p>移蟲日：<b id="resQueenDate" class="highlight">---</b></p>
                        <p>雄蜂培育：<b id="resDroneDate">---</b></p>
                    </div>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">pets</span><h3>(二) 育王批次排程</h3></div>
                <div class="card-body">
                    <label>移蟲日 (第0天)：</label><input type="date" id="graftingDate" class="glass-input">
                    <button id="btnRearingBatch" class="btn-primary">計算排程</button>
                    <div class="result-area">
                        <p>0. 移蟲：<b id="graftDate">---</b></p>
                        <p>5. 封蓋：<b id="cappingDate">---</b></p>
                        <p>11. 移台：<b id="moveCellDate" class="highlight">---</b></p>
                        <p>13. 出台：<b id="emergenceDate">---</b></p>
                    </div>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">bug_report</span><h3>(三) 蜂蟹蟎治療期</h3></div>
                <div class="card-body">
                    <label>關王/無王日：</label><input type="date" id="cagingDate" class="glass-input">
                    <button id="btnVarroa" class="btn-primary">計算</button>
                    <div class="result-area">
                        <p>工蜂羽化畢：<b id="workerEmergenceDate" class="highlight">---</b></p>
                        <small>(建議用藥：關王後 21-24 天)</small>
                    </div>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">call_split</span><h3>(四) 分蜂計畫</h3></div>
                <div class="card-body">
                    <label>預計分蜂日：</label><input type="date" id="targetSwarmDate" class="glass-input">
                    <button id="btnSwarm" class="btn-primary">計算</button>
                    <div class="result-area">
                        <p>最遲移蟲日：<b id="graftForCellDate" class="highlight">---</b></p>
                    </div>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">local_florist</span><h3>(五) 流蜜期與飼餵</h3></div>
                <div class="card-body">
                    <label>流蜜開始日：</label><input type="date" id="honeyFlowDate" class="glass-input">
                    <button id="btnHoneyFlow" class="btn-primary">計算</button>
                    <div class="result-area">
                        <p>開始獎勵飼餵：<b id="startFeedingDate">---</b></p>
                        <p>藥物移除日：<b id="removeMedsDate" class="highlight">---</b></p>
                    </div>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">local_cafe</span><h3>(六) 糖水/飼料比例</h3></div>
                <div class="card-body">
                    <div class="input-row">
                        <select id="inputSyrupRatio" class="glass-input">
                            <option value="1:1">1:1 (獎勵)</option>
                            <option value="2:1">2:1 (越冬)</option>
                        </select>
                        <input type="number" id="inputSyrupVol" class="glass-input" placeholder="公升數 (L)">
                    </div>
                    <button id="btnCalcSyrup" class="btn-primary">計算配方</button>
                    <div class="result-area">
                        <p>需白糖：<b id="resSugar" class="highlight">---</b> kg</p>
                        <p>需清水：<b id="resWater">---</b> L</p>
                    </div>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">monetization_on</span><h3>(八) 利潤預估</h3></div>
                <div class="card-body">
                    <input type="number" id="harvestBoxes" class="glass-input" placeholder="採收箱數">
                    <input type="number" id="avgKgPerBox" class="glass-input" placeholder="每箱均產 (kg)">
                    <input type="number" id="pricePerKg" class="glass-input" placeholder="售價 ($/kg)">
                    <input type="number" id="costPerBox" class="glass-input" placeholder="每箱成本 ($)">
                    <button id="btnProfit" class="btn-primary">計算利潤</button>
                    <div class="result-area">
                        <p>總收入：<b id="totalRevenue">---</b></p>
                        <p>總成本：<b id="totalCost">---</b></p>
                        <p>淨利潤：<b id="netProfit" class="highlight">---</b></p>
                    </div>
                    <div style="height:200px; margin-top:15px;"><canvas id="profitChart"></canvas></div>
                </div>
            </div>
        </div>

        <div id="tab-logs" class="tab-section">
            <h2 class="section-title">📝 蜂場日誌</h2>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">healing</span><h3>(九) 用藥紀錄</h3></div>
                <div class="card-body">
                    <input type="date" id="logDate" class="glass-input">
                    <input type="text" id="logHive" class="glass-input" placeholder="箱號 (如 A-01)">
                    <input type="text" id="logDrug" class="glass-input" placeholder="藥名">
                    <input type="text" id="logNote" class="glass-input" placeholder="備註">
                    <button id="btnSaveLog" class="btn-primary">寫入紀錄</button>
                    <textarea id="outputLog" class="glass-textarea" rows="3"></textarea>
                    <button onclick="copyToClipboard('outputLog')" class="btn-secondary">📋 複製</button>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">search</span><h3>(十一) 蜂箱檢查</h3></div>
                <div class="card-body">
                    <input type="date" id="insDate" class="glass-input">
                    <input type="text" id="insHive" class="glass-input" placeholder="箱號">
                    <div class="task-list">
                        <label class="task-item"><input type="checkbox" id="ckQueen"><span>見王</span></label>
                        <label class="task-item"><input type="checkbox" id="ckEggs"><span>見卵</span></label>
                        <label class="task-item"><input type="checkbox" id="ckCell"><span>王台</span></label>
                    </div>
                    <input type="text" id="insNote" class="glass-input" placeholder="備註">
                    <button id="btnSaveIns" class="btn-primary">寫入紀錄</button>
                    <textarea id="outputIns" class="glass-textarea" rows="3"></textarea>
                    <button onclick="copyToClipboard('outputIns')" class="btn-secondary">📋 複製</button>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">history_edu</span><h3>(十二) 蜂王譜系</h3></div>
                <div class="card-body">
                    <input type="text" id="queenId" class="glass-input" placeholder="蜂王編號">
                    <input type="date" id="queenHatch" class="glass-input" title="出台日">
                    <select id="queenStatus" class="glass-input">
                        <option>強壯 (In Service)</option>
                        <option>觀察中 (Watching)</option>
                        <option>汰換 (Replaced)</option>
                    </select>
                    <button id="btnSaveQueen" class="btn-primary">寫入紀錄</button>
                    <textarea id="outputQueen" class="glass-textarea" rows="3"></textarea>
                    <button onclick="copyToClipboard('outputQueen')" class="btn-secondary">📋 複製</button>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">local_shipping</span><h3>(十三) 蜂場移動</h3></div>
                <div class="card-body">
                    <input type="date" id="moveDate" class="glass-input">
                    <input type="text" id="moveFrom" class="glass-input" placeholder="從...">
                    <input type="text" id="moveTo" class="glass-input" placeholder="搬到...">
                    <button id="btnSaveMove" class="btn-primary">寫入紀錄</button>
                    <textarea id="outputMove" class="glass-textarea" rows="3"></textarea>
                    <button onclick="copyToClipboard('outputMove')" class="btn-secondary">📋 複製</button>
                </div>
            </div>

            <div class="glass-card tool-card">
                <div class="card-header"><span class="material-icons-round">payments</span><h3>(十四) 採收與費用</h3></div>
                <div class="card-body">
                    <label>🍯 採收：</label>
                    <input type="date" id="harvDate" class="glass-input">
                    <input type="text" id="harvItem" class="glass-input" placeholder="品項 (龍眼蜜)">
                    <input type="number" id="harvKg" class="glass-input" placeholder="公斤數">
                    <button id="btnSaveHarv" class="btn-primary">紀錄採收</button>
                    <textarea id="outputHarv" class="glass-textarea" rows="2"></textarea>
                    
                    <hr style="margin:15px 0; border:0; border-top:1px solid #ddd;">
                    
                    <label>💸 費用：</label>
                    <input type="text" id="expItem" class="glass-input" placeholder="項目 (糖/藥)">
                    <input type="number" id="expCost" class="glass-input" placeholder="金額">
                    <button id="btnSaveExp" class="btn-primary">紀錄費用</button>
                    <textarea id="outputExp" class="glass-textarea" rows="2"></textarea>
                </div>
            </div>
        </div>

        <div id="tab-tasks" class="tab-section">
            <h2 class="section-title">✅ 今日工作</h2>
            <div class="glass-card tool-card">
                <div class="card-body">
                    <input type="date" id="taskDate" class="glass-input">
                    <input type="text" id="taskHives" class="glass-input" placeholder="箱號 (1-10)">
                    <div class="task-list">
                        <label class="task-item"><input type="checkbox" id="t1" value="餵1:1糖水"> <span>餵1:1糖水</span></label>
                        <label class="task-item"><input type="checkbox" id="t2" value="餵2:1糖水"> <span>餵2:1糖水</span></label>
                        <label class="task-item"><input type="checkbox" id="t3" value="餵花粉餅"> <span>餵花粉餅</span></label>
                        <label class="task-item"><input type="checkbox" id="t4" value="檢查產卵"> <span>檢查產卵</span></label>
                        <label class="task-item"><input type="checkbox" id="t5" value="檢查王台"> <span>檢查王台</span></label>
                        <label class="task-item"><input type="checkbox" id="t6" value="防治蜂蟹蟎"> <span>防治蜂蟹蟎</span></label>
                        <label class="task-item"><input type="checkbox" id="t7" value="繼箱作業"> <span>繼箱作業</span></label>
                        <label class="task-item"><input type="checkbox" id="t8" value="採蜜"> <span>採蜜</span></label>
                    </div>
                    <input type="text" id="taskOther" class="glass-input" placeholder="其他事項...">
                    <button id="btnGenTask" class="btn-primary">生成清單</button>
                    <textarea id="outputTask" class="glass-textarea" rows="6"></textarea>
                    <button onclick="copyToClipboard('outputTask')" class="btn-secondary">📋 複製到 LINE</button>
                </div>
            </div>
        </div>

        <div id="tab-settings" class="tab-section">
            <h2 class="section-title">⚙️ 系統設定</h2>
            <div class="glass-card tool-card">
                <h3>資料備份</h3>
                <p style="color:#666; font-size:0.9rem;">建議定期備份，以免更換手機時資料遺失。</p>
                <button id="btnExport" class="btn-primary" style="background:#2196F3;">⬇️ 匯出資料 (Backup)</button>
                <input type="file" id="fileInput" style="display:none">
                <button onclick="document.getElementById('fileInput').click()" class="btn-secondary">⬆️ 匯入資料 (Restore)</button>
                
                <hr style="margin:20px 0;">
                <button id="btnClearAll" class="btn-danger">🗑️ 清空所有資料 (重置)</button>
            </div>
        </div>

    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="switchTab('tab-home')">
            <span class="material-icons-round">dashboard</span>
            <small>首頁</small>
        </button>
        <button class="nav-item" onclick="switchTab('tab-calc')">
            <span class="material-icons-round">calculate</span>
            <small>計算</small>
        </button>
        <button class="nav-item" onclick="switchTab('tab-logs')">
            <span class="material-icons-round">edit_note</span>
            <small>日誌</small>
        </button>
        <button class="nav-item" onclick="switchTab('tab-tasks')">
            <span class="material-icons-round">checklist</span>
            <small>工作</small>
        </button>
        <button class="nav-item" onclick="switchTab('tab-settings')">
            <span class="material-icons-round">settings</span>
            <small>設定</small>
        </button>
    </nav>

    <script src="script.js"></script>
</body>
</html>
